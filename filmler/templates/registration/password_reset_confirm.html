{% extends 'base.html' %}
{% block content %}
<div class="auth-fullscreen">
    <div class="auth-card">
        <h2 class="text-warning fw-bold mb-3" style="font-family: 'Montserrat';">YENİ ŞİFRE BELİRLE</h2>
        <p class="text-white-50 mb-4 small">Lütfen yeni şifreni iki kez girerek onayla.</p>

        {% if validlink %}
            <form method="post">
                {% csrf_token %}
                {% for field in form %}
                    <div class="text-start mb-3">
                        <label class="auth-label">
                            {% if field.name == 'new_password1' %}Yeni Şifre
                            {% elif field.name == 'new_password2' %}Yeni Şifre (Tekrar)
                            {% else %}{{ field.label }}{% endif %}
                        </label>
                        {{ field }}
                        {% if field.help_text %}
                            <small class="text-secondary d-block mt-1" style="font-size: 0.7rem;">
                                * Şifren en az 8 karakter olmalı ve rakam içermelidir.
                            </small>
                        {% endif %}
                        {% if field.errors %}
                            {% for error in field.errors %}
                                <div class="text-danger small mt-1">⚠️ {{ error }}</div>
                            {% endfor %}
                        {% endif %}
                    </div>
                {% endfor %}
                <button type="submit" class="btn btn-warning w-100 py-3 fw-bold mt-3 rounded-pill">
                    ŞİFREYİ GÜNCELLE
                </button>
            </form>
        {% else %}
            <div class="alert alert-danger">
                Bağlantı geçersiz veya süresi dolmuş. Lütfen yeni bir link isteyin.
            </div>
            <a href="{% url 'password_reset' %}" class="btn btn-warning w-100 py-2 mt-3">YENİ LİNK İSTE</a>
        {% endif %}
    </div>
</div>
{% endblock %}